<header class="hero-unit" id="banner">
  <div class="container">
    <h1>RIT Publication Tracker</h1>
    <p class="lead">A central repository for RIT research</p>
  </div>
</header>

<div class="container">
  <div class="row main">
    <div class='col-lg-12 col-md-12 col-sm-12 col-xs-12'>
      <form>
        <div class="input-group">
          <div class="input-group-btn">
            <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">{{main.searchType.display}} <span class="caret"></span></button>
            <ul class="dropdown-menu" role="menu">
              <li ng-repeat="type in main.searchTypes" data-value='type.display'><a ng-click="main.searchType=type">{{type.display}}</a></li>
            </ul>
          </div>
          <input type="text" class="form-control" placeholder="Search by {{main.searchType.display}}" ng-model="main.searchPhrase">
          <div class="input-group-btn">
            <button type="submit" class="btn btn-primary" ng-click="main.search(main.searchType, main.searchPhrase)">Search</button>
          </div>
        </div>
      </form>
    </div>
  </div>

  <div class="row main">
    <div class='col-lg-12 col-md-12 col-sm-12 col-xs-12'>
      <div class="panel panel-default" ng-show="main.noResults">
        <div class="panel-body">
          <h4>No results were found for '{{main.lastSearch.searchTerm}}' in the {{main.lastSearch.field}} field.</h4>
        </div>
      </div>
      <div class="panel panel-default" ng-show="main.results.length > 0">
        <div class="panel-heading">
          <div class="panel-title">{{main.results.length}} Result{{main.results.length > 1 ? 's' : ''}}</div>
        </div>
        <table class="table table-hover">
          <thead>
            <tr>
              <th>Title</th>
              <th>Authors</th>
              <th>Keywords</th>
              <th>Views</th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="result in main.results">
              <td>{{result.title}}</td>
              <td>{{result.authors}}</td>
              <td>{{result.keywords}}</td>
              <td>{{result.views}}</td>
              <td><button type="submit" class="btn btn-primary" data-toggle="modal" ng-click="main.putViewcount(result.id)" data-target="#modal{{result.id}}">Details</button>
              <div id="modal{{result.id}}" class="modal fade" role="dialog">
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h4>{{result.title}}</h4>
                      <h4><small>{{result.authors}}</small></h4>
                    </div>
                    <div class="modal-body">
                      <p>{{result.abstract}}</p>
                      <hr>
                    </div>
                    <div class="modal-footer">
                      <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                    </div>
                  </div>
                </div>
              </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
